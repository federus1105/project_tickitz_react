name: Building Image and Pushing to GHCR
on: [push]
jobs:
  Build-And-Publish:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v5
      - name: Build and publish a Docker image for ${{ github.repository }}
        uses: macbre/push-to-ghcr@master
        with:
          context: . # Direktori tempat Dockerfile berada
          push: true
          tags: ghcr.io/${{ github.repository }}:latest
          image_name: ${{ github.repository }} # it will be lowercased internally
          github_token: ${{ secrets.GITHUB_TOKEN }}
      - name: Set lowercase image name
        id: lowercaserepo
        run: |
          echo "IMAGE_NAME=$(echo '${{ env.REPO_NAME }}' | tr '[:upper:]' '[:lower:]')" >> $GITHUB_ENV
